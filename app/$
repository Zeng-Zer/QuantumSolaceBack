from flask import Flask, request
import circuit as c
import json
import pprint

Circuit = c.Circuit
solutionCircuitsByLevel = c.allCircuits

app = Flask(__name__)


@app.route('/getCircuits')
def getCircuits():
    return ''

@app.route('/getQTP')
def getQTP():
    return 'QTP'

@app.route('/checkCircuit', methods = ['POST'])
def checkCircuit():
    circuit = Circuit.from_json(request.get_json())
    solutionsCircuits = solutionCircuitsByLevel[circuit.level]
    app.logger.debug(json.dumps(request.get_json()))
    app.logger.debug(solutionsCircuits[0].__dict__)
    if circuit in solutionsCircuits:
        app.logger.debug("FOUND")
    else:
        app.logger.debug("NOT FOUND")
    return json.dumps(circuit, default = lambda o: o.__dict__, indent = 4)

@app.route('/runOnQiskit', methods = ['POST'])
def runOnQiskit():
    print(request.get_json())
    return 'QISKIT'
